{% extends "layouts/base.njk" %}

{% block content %}
<section class="hero container">
  <h1>{{ site.title }}</h1>
  <p class="lead">{{ site.description }}</p>

  <form id="search-form" class="search-box" role="search" aria-label="Search blog">
    <input id="search-input" type="search" name="q" placeholder="Search legal topics..." aria-label="Search">
    <button type="submit">Search</button>
  </form>
</section>

<section class="latest container" aria-labelledby="latest-heading">
  <h2 id="latest-heading">Latest Articles</h2>

  <div class="articles-grid">
    {% for post in collections.posts | slice(0,12) %}
      <article class="card">
        <a class="card-link" href="{{ post.url }}">
          {% if post.data.featuredImage %}
            <img src="{{ post.data.featuredImage }}" alt="{{ post.data.title }}" loading="lazy">
          {% endif %}
          <div class="card-body">
            <h3>{{ post.data.title }}</h3>
            <p>{{ post.data.description | safe }}</p>
          </div>
        </a>
      </article>
    {% else %}
      <p>No posts yet. Add your first post in <code>src/posts/</code>.</p>
    {% endfor %}
  </div>
</section>

<section id="areas" class="categories container" aria-labelledby="areas-heading">
  <h2 id="areas-heading">Explore by Area</h2>
  <div class="category-grid">
    {% set cats = collections.posts | map('data') | map('category') | uniq %}
    {% for c in cats %}
      <a class="cat-item" href="#">{{ c }}</a>
    {% endfor %}
  </div>
</section>
{% endblock %}
